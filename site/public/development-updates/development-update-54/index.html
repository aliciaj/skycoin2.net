<!DOCTYPE html>
<html lang="en-us">
  
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Development Update #54 | Skycoin Blog</title>
  <link rel="stylesheet" href="../../css/main.css" />
  
    <meta property="og:title" content="Development Update #54">
    
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2015-01-25">
    
    <meta property="og:description" content="Release notes highlighting the current development behind Skycoin.">
    <meta property="og:url" content="https://www.skycoin.net/development-updates/development-update-54/">
    <meta property="og:site_name" content="Skycoin Blog">
    
    
    <meta property="og:tags" content="Development">
    
    <meta property="og:tags" content="Consensus">
    
    <meta property="og:tags" content="Whitepaper">
    
    
  
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-105234182-1', 'auto');
    ga('send', 'pageview');
    </script>
  
</head>

<body>
<header class="site-header color-light">
	<div class="logo-container">
		<a href="../../" class="logo"><span>Skycoin</span></a>
	</div>
	<nav class="nav">
		<ul>
			
				
				<li class="has-dropdown">
					<span class="nav-link">Technology</span>
					<ul>
						
						<li>
							<a class="dropdown-item nav-item-skywire" href="../../skywire">Skywire</a>
						</li>
						
						<li>
							<a class="dropdown-item nav-item-skycoin" href="../../skycoin">Skycoin</a>
						</li>
						
						<li>
							<a class="dropdown-item nav-item-skyledger" href="../../skyledger">Skyledger</a>
						</li>
						
					</ul>
				</li>
				
			
				
				<li>
					<a class="nav-link nav-item-whitepapers" href="../../whitepapers/">Whitepapers</a>
				</li>
				
			
				
				<li>
					<a class="nav-link nav-item-roadmap" href="../../roadmap/">Roadmap</a>
				</li>
				
			
				
				<li>
					<a class="nav-link nav-item-downloads" href="../../downloads/">Downloads</a>
				</li>
				
			
				
				<li>
					<a class="nav-link nav-item-blog" href="../../blog/">Blog</a>
				</li>
				
			
				
				<li>
					<a class="nav-link nav-item-markets" href="../../markets/">Buy Skycoin</a>
				</li>
				
			
		</ul>
	</nav>	
</header>

<section id="main">
	<div class="hero ">
	    <h1 id="title">Development Update #54</h1>
    </div>

    <article id="content">
        

<h3 id="consensus-algorithm-update">Consensus Algorithm Update:</h3>

<p><strong>White paper Draft</strong>: <a href="http://128.199.188.22:1337/consensus.pdf">http://128.199.188.22:1337/consensus.pdf</a>
<strong>Graphs</strong>: <a href="http://128.199.188.22:1337/">http://128.199.188.22:1337/</a></p>

<p><img src="http://i.imgur.com/vKjRjaS.png" alt="" /></p>

<p>This is a histogram of convergence times. The x-axis is &ldquo;rounds&rdquo; the network takes to reach consensus (all nodes in the same state) for a single round consensus process.  The top algorithm is hill climbing, the middle algorithm is simulated annealing and the bottom algorithm is changing randomly between hill climbing and simulated annealing.</p>

<p>There is a network of nodes. Each node follows a number of other nodes. Each node has a state 0 or 1. Each node sets its state based upon randomness and the state of the nodes it is following. The process is simulated in a python discrete event simulator and includes network latency.</p>

<p>The network of the graph used in simulation is a real world social network, taken from the Stanford Wikipedia admin dataset.</p>

<p>We see that the top graph (hill climbing) converges within 10 rounds and usually in less than 5 rounds. However, there is a probability that consensus is not achieved within 45 rounds (The bar on the right on the first graph). The network reaches a local minimum and gets stuck there and never convergences, but only rarely.</p>

<p>One round for a network of global servers, is about 250 ms (the network latency latency between Canada and Australia).  Convergence in 5 rounds, means block times of 1 second.</p>

<p>For the second graph (simulated annealing), we see that there is a constant probability of convergence. This is because of &ldquo;Symmetry Breaking&rdquo;. The simulated annealing process is driven by the &ldquo;Delta&rdquo; at each node. The network starts with half the nodes as 0s and half as 1s and so the delta is small. As the network becomes biased, the network converges exponentially quickly to one state or the other state. The symmetry breaking process is a random walk and can take arbitrarily long.</p>

<p>In the third graph (each node switches random between simulated annealing and hill climbing). The hill climbing breaks the symmetry and the simulated annealing prevents the network from getting stuck in a local minimum.</p>

<p>This is a graph of the commutative convergence probability function for each algorithm. Even with a real world social network graph, the probability of convergence for algorithm 3 is 1 for 20 rounds. This corresponds to 4 second blocks. The majority of blocks will achieve consensus within one second. This is competitive with credit card transactions. Bitcoin transaction confirmation times are 10 minutes.</p>

<p><img src="http://i.imgur.com/jPnam0h.png" alt="" /></p>

<p>There is an even faster one round consensus algorithm, based upon the method of 1-Replica Symmetry Breaking and the cavity method for spin glass systems in statistical mechanics. The existing algorithm is fast enough for now.</p>

<p>Consensus is the idea that the network reaches a ground state. There is a global energy function of all nodes. There is a local energy function for each individual node, which depends on the state of its neighbors in the graph. The network has minimum energy and is in the ground state when all nodes are in the same state (consensus). Each node has a local view of the network and acting independently achieve global consensus.</p>

<p>In Bitcoin the blockchain which required the most hashing to produce is the consensus chain. When consensus changes a fork becomes the longest blockchain in the tree of blockchains. A reorganization happens and transactions may be invalidated (double spending).</p>

<p>In Skycoin, malicious nodes can slow down or manipulate the consensus process but cannot revoke consensus of previous blocks (under most circumstances). A large enough group of influential and colluding nodes can completely control which blocks are accepted or rejected. The attacking nodes, however cannot revocate previous consensus decisions.</p>

<p>The consensus algorithm is based upon Ben-Ors randomized decision process over a Web of Trust (WoT) network. The nodes each node is subscribed to, represents the friends (personal contacts), peers and institutions (merchants, exchanges, websites, services) the user believes are trustworthy and reliable. Instead of spreading consensus across two or three mining pools which control 51% of the hash rate (three institutions), consensus is distributed across several dozen or several hundred of high influence nodes with network centrality which must be individually subverted or collude to influence the network.</p>

<p>In Skycoin, nocd trust relationships can be modified to marginalize nodes which have been shown to be involved in attacks of the network. Therefore, control of the network can be reclaimed if it falls into the control of a malicious faction. Nodes lose the influence required for a successful attack, once they have acted maliciously, as people will remove those nodes from their trust list as a result of an attack. In Bitcoin, hashing power cannot be removed from people who exploit majority control of the network.</p>

<p>Bitcoin has no mechanism to recover once a 51% attack occurs. Once a 51% attack occurs it will lower the price of Bitcoin, hash rate will decrease as unprofitable miners shut off equipment and the cost of subsequent attacks will be reduced. Bitcoin may suffer death spiral under a successful attack. This has not occurred with Bitcoin yet, although has occurred in several alt-coins.</p>

<p>The primitives in Skycoin&rsquo;s consensus process relay heavily on &ldquo;randomization. It is impossible to guarantee consensus within a finite amount of time or guarantee the absence of blockchain forks (randomization), but the probability approaches zero exponentially quickly in time.</p>

<h6 id="the-final-implementation-will-have-multiple-tiers-of-transaction-and-consensus-mutability">The final implementation will have multiple tiers of transaction and consensus mutability.</h6>

<ul>
<li>There is a small probability of a revocation for a transaction in a 0-confirmation block.</li>
<li>The probability of a revocation of a block decreases exponentially in the number of confirmations</li>
<li>After N-confirmations the block cannot be revoked in the consensus process without introducing a fork (consensus diversity). The network will stop and wait rather than continuing if alternative candidates remain which have unresolved fork candidates to block depth N/2.</li>
<li>Even if a fork occurs, it will not affect the majority of transactions or outputs. Most transactions and outputs will exist on both forks and there is minimal ability of an active attacker to modify the validity of transaction chains they were not involved in.</li>
<li>There is a federated mutability check-point every M blocks, once the block has reached sufficient depth. This includes a hash of the full blockchain state and unspent output set. A node issuing a checkpoint should subscribe to several thousands nodes in the network (possibly all nodes) and certify global consensus. These will probably be run by developers and exchanges. An individual node should compare the output of several independent checkpoint issuing nodes. I am having trouble imaging an attack that could result retroactively introduce a fork that occurs before the last check-point. If 80% of the nodes in the network disappear because of a netsplit or nuclear war, it becomes more important to avoid issuing a checkpoint which misrepresents confidence in the network state.</li>
</ul>

<h2 id="federation-vs-decentralization">Federation vs Decentralization</h2>

<p>Skycoin&rsquo;s architecture relies heavily on &ldquo;federalization&rdquo;, which is a form of decentralization but different than Bitcoin&rsquo;s form of decentralization, Examples:</p>

<h5 id="banking">Banking:</h5>

<ul>
<li>Centralized: a global central bank that issues money and clears all transactions through hierarchical sub-banks</li>
<li>Federated: each bank issues their own notes, redeemable against gold (free banking)</li>
<li>Federation to the user level: every user issues their own notes and credit to other users, every user is a bank (Ripple-pay (not ripple))</li>
</ul>

<h5 id="communications">Communications:</h5>

<ul>
<li>Centralized: AIM/QQ, a centralized entity which forwards all communications between users</li>
<li>Federated: Email, a network of email servers where each server is run by a different person, each of which support multiple users as clients. users@domain.com . Users have a choice of servers and can run their own server if they do not trust any existing server.</li>
<li>Federation to user level: Tox, each user communicates directly with their peers</li>
</ul>

<p>&ldquo;Decentralized&rdquo; and &ldquo;peer to peer&rdquo; are vague. A protocol can be federated but have peer-to-peer replication. A protocol can both be centralized on one level, federated on another level and peer-to-peer on another level. Decentralization or federation at the user level is not always superior to decentralization either.</p>

<h5 id="file-sharing">File Sharing:</h5>

<ul>
<li>Centralized: FTP server (which is actually federated, as a protocol, but is not federated as a source of a particular file!)</li>
<li>Federated: Torrents. Federation of torrent file distribution (no global centralized index of torrent files, but anyone can host an index of torrent files. Choice of multiple directories of torrent files), but peer-to-peer replication of files within an individual torrent</li>
<li>Peer-to-peer: Kazaa. Decentralized index, decentralized searching, decentralized downloading from peers. Notice that Kazaa is completely &ldquo;decentralized&rdquo; but is not as robust, useful or survivable as Torrents, because it did not have a mechanism for curation. Here, decentralization of everything was inferior to federation, because the completely decentralized service (Kazaa) was flooded with junk files, while the federated service (Torrent Trackers) was able to maintain high quality files, without creating a single point of failure which could destroy the network. Kazaa was quickly destroyed, but even destroying a single directory such as Piratebay or Demonoid has been frustrating and resource intensive. What.cd replaced its predecessor within hours of the original being taken down.</li>
</ul>

<p>In Skycoin federation means that there are privileged servers that the client must trust (such as the mutability checkpoint servers). However, each client has a choice of which servers to trust. You can run your own server or if you are running an exchange or bank, you should be running your own checkpoint server and you should also be checking against external servers. You should only accept the consensus if there is unanimous and uncontested agreement.</p>

<p>This is similar to N of M signatures. You choose a list of N people and you only accept something if all N agree. With 10 servers a successful attack on 9 servers will fail as the client will detect a discrepancy. For a bank or exchange, this would mean freezing transactions until issue is resolved by a human. This represents escalation from algorithmic resolution to human judgement.</p>

<p>Federation enters into the design of Skycoins in several places. If you have a common protocol for exchanges and each exchange is a public key, you put a list of five public keys (exchanges) on the list of exchanges you &ldquo;trust&rdquo;. Then you look for the best Dogecoin/Bitcoin exchange rate across all five exchanges and can execute at the best quote across the five exchanges.</p>

<p>In Skywire, public keys replace IP addresses. This is a cryptographic version of DNS. A public key uniquely identifies a service, server, entity or communication end-point. The protocol is immune to man-in-middle attacks and no one can impersonate a service without obtaining the private-key for the service.</p>

<h2 id="multi-round-consensus">Multi-round consensus</h2>

<p>We are now working on research of the multi-round &ldquo;tree consensus&rdquo; algorithm. Tree consensus algorithm is the multi-block consensus process and will be the algorithm implemented for Skycoin. The tree-consensus algorithm supports consensus process concurrency (consensus debate on multiple chains concurrently) and consensus diversity (there may be one or more &ldquo;consensus&rdquo; chains. A  rare and severe netsplit condition or successful attack may introduce forks where the preferred consensus candidate should be resolved by hand by each individual node operator. If a transaction has been executed on all consensus chains, then it has been executed for all purposes).</p>

<p>Consensus diversity means that if there are five forks open for consensus and your transaction has been executed on all five forks, you can safely spend the outputs of the transaction without risk of it being invalidated and the output made retroactively unspendable on any of the forks. This is a notion of &ldquo;blockchain fork forward security&rdquo;. Forks can be introduced in future, but not retroactively. This is enforced by all honest nodes in the network through use of local timestamping (later distributed time stamping) of block publication time and strong insistence against accepting a block into the census set which could not have existed at the block publication time.</p>

<p>Security of local time stamping relies on several assumptions. The most important assumption is that each node has at-least one node it is connected to, that is not a Sybil attack node. If a node is connected to 10 nodes and 9 of the nodes are Sybil attack nodes that may arbitrarily delay block propagation. as long as 1 node is not in the Sybil set then the timestamps will be reasonably accurate.</p>

<h2 id="road-map">Road Map</h2>

<ol>
<li>Paper on single round consensus</li>
<li>Research on multi-round tree consensus and python simulation</li>
<li>Some aspects of skywire, moving Visor on top of skywire</li>
<li>Implement tree consensus in go and integrate into Skycoin</li>
<li>Misc. infrastructure. Check-pointing, network monitoring, emergency alert system, merkle-DAG for parallel block downloads</li>
</ol>

<p>#1 is in progress. #2 and #3 are happening concurrency. #5 will have to be handled by the community because we dont have time.</p>

    </article>

    
    
</section>

<footer style="background-color:darkgray;">
    <a href="">SkyCoin Logo</a>
    <p>En, Cn, Ko, Jp</p>
    <nav>
        <div>
            <ul>
                <li>SkyCoin</li>
                <li>
                    <a href="">Team</a>
                </li>
                <li>
                    <a href="">Blog</a>
                </li>
                <li>
                    <a href="https://explorer.skycoin.net/app/blocks/1">Blockchain Explorer</a>
                </li>
            </ul>
        </div>
        <div>
            <ul>
                <li>Technology</li>
                <li>
                    <a href="">SkyWire</a>
                </li>
                <li>
                    <a href="../../skycoin">SkyCoin</a>
                </li>
                <li>
                    <a href="">SkyMiner</a>
                </li>
            </ul>
        </div>
        <div>
            <ul>
                <li><a href=""></a>Community</li>
                
                    <li><a class="footer__link" href="https://www.skycoin.net/">skycoin.net</a></li>
                
                    <li><a class="footer__link" href="https://github.com/skycoin">Github</a></li>
                
                    <li><a class="footer__link" href="https://twitter.com/skycoinproject">Twitter</a></li>
                
                    <li><a class="footer__link" href="https://reddit.com/r/SkycoinProject">Reddit</a></li>
                
                    <li><a class="footer__link" href="https://t.me/Skycoin">Telegram</a></li>
                
                    <li><a class="footer__link" href="https://explorer.skycoin.net/">Blockchain Explorer</a></li>
                
            </ul>
        </div>
        <div>
            <ul>
                <li>Contact</li>
                <li>
                    <a>Email Us</a>
                </li>
                <li>
                    <a href="https://www.skycoin.net/mailing-list/" target="_blank">Mailing List</a>
                </li>
            </ul>
        </div>
    </nav>
</footer>
    

    <script src="../../app.js"></script>


  <script>
    var dropdown = document.querySelector('.js-dropdown'),
      list = dropdown.querySelector('.js-dropdown-list'),
      current = dropdown.querySelector('.js-dropdown-current');

    current.addEventListener('click', function(e) {
      list.classList.toggle('header-dropdown__list_show');

      document.addEventListener('click', function(e) {
        if(!dropdown.contains(e.target)) {
          list.classList.remove('header-dropdown__list_show');
        }
      });
    }, false)
  </script>

  <script src="../../app.js"></script>

  
    <script src="//platform.twitter.com/oct.js" type="text/javascript"></script>
    <script type="text/javascript">
    if (window.twttr) {
      twttr.conversion.trackPid('ny03t', { tw_sale_amount: 0, tw_order_quantity: 0 });
    } </script>
    <noscript>
    <img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=ny03t&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0" />
    <img height="1" width="1" style="display:none;" alt="" src="//t.co/i/adsct?txn_id=ny03t&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0" />
    </noscript>
  

</body>
</html>
